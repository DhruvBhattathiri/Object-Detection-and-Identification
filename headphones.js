status = "";
object = [];

function setup()
{
    canvas = createCanvas(640, 420);
    canvas.center();
}

function preload()
{
    img = loadImage('data:image/jpeg;base64,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');
    objectDetector = ml5.objectDetector('cocossd', modelLoaded);
    document.getElementById("status").innerHTML = "Status = Object Detecting";
}

function modelLoaded()
{
    console.log("Model Loaded!");
    status = true;
    objectDetector.detect(img, gotResults);
}

function gotResult(error, results)
{
  if(error){
      console.log(error);
  }
    console.log(reults);
    object = results;
}

function draw()
{
    if (status != "")
    {
        for (i=0; i < object.length; i++)
        {
            percent = floor(object[i].confidence * 100);
            text(object[i].label + "" + percent + "%", object[i].x, object[i].y)
            rect(object[i].x, object[i].y, object[i].width, object[i].heigth);

            document.getElementById("no").innerHTML = object;
            document.getElementById("status").innerhtml = "Status : Object Detected";
        }
    }
}